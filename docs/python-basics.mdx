# Poke-Controllerでのプログラム編集の手引き

Poke-Controllerを使いこなす上で、自力でプログラムを修正できるようになるとできることの幅がものすごく広がります。

この機会に、ちょっとした修正をできるようになってみましょう！

## .pyファイルの開き方

.py ファイルは、プログラムが記載されたテキストファイルです。

Windows標準のテキストエディタである「メモ帳」でも開けますが、専用のエディタを使うととてもわかりやすく[^1]表示できます。

[^1]:文法に応じて色分けして表示してくれたり、明らかに誤っている箇所を指摘してくれたりします。

以下、プログラミングにおすすめのエディタを紹介します。（どちらも初心者からプロまで、多くの人が愛用しているエディタです。）

- [Visual Studio Code](https://code.visualstudio.com/) <br />
    Microsoftが公開している、無料のテキストエディタです。<br />
    単体ではシンプルなテキストエディタですが、拡張機能を導入することによって非常に高機能なエディタとしても使うことができます。

- [PyCharm](https://www.jetbrains.com/ja-jp/pycharm/) [^2]<br />
    JetBrainsが公開している、Python専用の統合開発環境[^3]です。<br />
    最初から（拡張機能を入れなくても）Pythonでの開発に必要なすべての機能がそろっています。<br />
    「デバッグ」機能で好きな箇所で一時停止したり、ファイルの変更履歴を自在に確認できたりと超便利です。

[^2]:無料版のCommunity Editionでも、Poke-Controller用プログラムの編集には十二分に使えます。
[^3]:テキストエディタの超すごい版です。

## 基本的な編集方法

以下に、Poke-Controller Modified のコマンドを編集するときの、基本的な操作方法を例を用いて紹介します。

1. 編集したいコマンドの、.pyファイルを探して開きます
    - 「Visual Studio Code」や「PyCharm」を使っている場合<br />
        `C:\PokeCon\Poke-Controller-Modified`フォルダを開いて、フォルダ内検索で探しましょう。
        - メニューバーから、「ファイル」→「フォルダーを開く」を選択し、`C:\PokeCon\Poke-Controller-Modified` フォルダを開きます。
            - 「このフォルダー内のファイルの作成者を信頼しますか?」のダイアログでは、基本的には `はい、作成者を信頼します` を選択します。
        - `Ctrl + Shift + F` でフォルダ内検索機能を開き、コマンド名で検索して見つかったファイルを開きます。
    - 特にテキストエディタを用意していない場合<br />
        .pyファイルは、多くの場合以下のフォルダに保存されています。フォルダ内のファイルを「メモ帳」で開き、頑張って探して見つけましょう。[^4]
        - `C:\PokeCon\Poke-Controller-Modified\SerialController\Commands\PythonCommands`
        - `C:\PokeCon\Poke-Controller-Modified\SerialController\Commands\PythonCommands\ImageProcessingOnly`

[^4]:基本的には、頑張らなくていい専用エディタを使うほうがおすすめです。

2. 編集が必要な箇所を特定します<br />
    1. 開いたファイル内にある、`do`メソッドを探します。<br />
        `do`メソッドは、通常、 `def do(self):` という書き出しで始まっています。[^5]<br />
    2. `do`メソッドの処理を上から順に追っていき、修正したい（=何かしら問題を感じている）箇所にたどりつきます
        - プログラムは、基本的には以下の3つの要素で構成されています。
            - 関数・メソッド呼び出し（`self.press()`など）
            - フロー制御
                - 条件分岐（`if - else`）
                - 繰り返し（`for`, `while`）
　　　　　　　- 変数への代入（`=演算子`）
    3. 修正する必要のありそうな箇所にたどり着いたら、どのような挙動になれば問題を解決できるかを想像します。
    4. 想像した挙動になるように、その行を変更したり、前後に行を追加・削除します。

[^5]:`Ctrl + F`で検索機能を開き、`def do(self):`と入力して検索すると見つかります。

3. Poke-Controller Modified を開き、画面右下の「Reload」ボタンを押してからコマンドを選択して「Start」ボタンを押して、<br />
    修正がうまくいったかを確認します


## プログラムに頻出する、主なメソッドの使い方

### self.press

```
    self.press(ボタンの種類, ボタンを押し続ける時間, ボタンを離した後の待機時間)
```

例：<br />
```
    self.press(Button.A, 0.1, 3.5)
```

上記の例だと、Aボタンを押しはじめた0.1秒後にボタンを離し、その後3.5秒待機します。

## Pythonの文法紹介

執筆中です。

